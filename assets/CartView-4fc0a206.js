import{_ as C,o as d,c,a as p,d as t,F as u,h as g,i as m,t as l,e as x,j as I}from"./index-e2563998.js";const{VITE_APP_URL:i,VITE_APP_PATH:h}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"ching",BASE_URL:"/vue-week6/",MODE:"production",DEV:!1,PROD:!0},b={data(){return{cart:{},qty:1,loadingItem:""}},methods:{getCart(){this.$http.get(`${i}/api/${h}/cart`).then(e=>{this.cart=e.data.data}).catch(e=>{alert(e.response.data.message)})},updateCartItem(e){const o={product_id:e.product_id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${i}/api/${h}/cart/${e.id}`,{data:o}).then(r=>{alert(r.data.message),this.getCart(),this.loadingItem=""}).catch(r=>{alert(r.response.data.message)})},deleteCartItem(e){this.loadingItem=e,this.$http.delete(`${i}/api/${h}/cart/${e}`).then(o=>{alert(o.data.message),this.getCart(),this.loadingItem=""}).catch(o=>{alert(o.response.data.message)})},deleteCart(){this.$http.delete(`${i}/api/${h}/carts`).then(e=>{alert(e.data.message),this.getCart()}).catch(e=>{alert(e.response.data.message)})}},mounted(){this.getCart()}},f={class:"table align-middle"},y=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),$=["onClick","disabled"],v={key:0,class:"fas fa-spinner fa-pulse"},P={class:"input-group input-group-sm"},V={class:"input-group mb-3"},k=["onUpdate:modelValue","onChange","disabled"],E=["value"],A={class:"input-group-text",id:"basic-addon2"},T={class:"text-end"},q=t("td",{colspan:"3",class:"text-end"},"總計",-1),D={class:"text-end"},U=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),w={class:"text-end text-success"};function B(e,o,r,L,a,_){return d(),c(u,null,[p(" 這是購物車頁面 "),t("table",f,[y,t("tbody",null,[a.cart.carts?(d(!0),c(u,{key:0},g(a.cart.carts,s=>(d(),c("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:n=>_.deleteCartItem(s.id),disabled:a.loadingItem===s.id},[a.loadingItem===s.id?(d(),c("i",v)):m("",!0),p(" x ")],8,$)]),t("td",null,l(s.product.title)+" ",1),t("td",null,[t("div",P,[t("div",V,[x(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":n=>s.qty=n,onChange:n=>_.updateCartItem(s),disabled:a.loadingItem===s.id},[(d(),c(u,null,g(20,n=>t("option",{value:n,key:`qty${n}`},l(n),9,E)),64))],40,k),[[I,s.qty]]),t("span",A,l(s.product.unit),1)])])]),t("td",T,l(s.final_total),1)]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[q,t("td",D,l(a.cart.total),1)]),t("tr",null,[U,t("td",w,l(a.cart.final_total),1)])])])],64)}const N=C(b,[["render",B]]);export{N as default};
